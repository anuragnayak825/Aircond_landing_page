"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[911],{60911:function(e,t,n){n.r(t),n.d(t,{ProjectActionMenu:function(){return S}});var a=n(97458),o=n(96734),r=n(84867),s=n(52983),c=n(80794),l=n(95931),i=n(98532),d=n(29602),u=n(31850),m=n(80980),p=n(81725),h=n(39087),j=n(37268),x=n(75800),f=n(45651),g=n(31401),w=n(69826);const S=e=>{let{canShareProject:t,hoverBackgroundClass:n,icon:S="meatball-menu-thick",iconClass:C,isHovered:k,isPrivate:v,isSystem:b,navigateToHomeAfterDelete:I,noFocus:D=!1,onDownloadAllClick:A,onOpenChange:y,onSelect:E,permissionScopes:T,projectId:R,projectTitle:N,roundedClass:L,source:O,testId:_,workspaceId:F}=e;const{hasDownloadAccess:P,hasUpdateAccess:J}=(0,h.O)({scopes:T}),[M,W]=(0,s.useState)(!1),[B,H]=(0,s.useState)(!1),[U,Z]=(0,s.useState)(!1),z=(0,o.SS)(r.AD.ENABLE_ZIP_DOWNLOAD),[,V]=(0,c.Db)(j.b4),{isWorkspaceSuspended:Y,openSuspendedWorkspaceModal:q}=(0,p.q)(F),K=(0,x.useSetRecoilState)(f.I),Q=(0,s.useCallback)((e=>{V({id:R,isPrivate:e})}),[R,V]),$=(0,s.useCallback)((e=>{(0,w.Z9)(new w.jU({action:"click",label:e,source:O}))}),[O]);return J()||P()?(0,a.jsx)("div",{className:"flex items-center ".concat(k||U?"visible":"invisible"),children:(0,a.jsxs)(l.f,{onOpenChange:e=>{Z(e),null==y||y(e),e&&$("open-project-action-menu")},children:[(0,a.jsx)(g.u,{title:"Rename, download, and more...",placement:"top",children:Y?(0,a.jsx)(i.h,{testId:"".concat(_||"project-action-menu","-action-menu-suspended"),noFocus:D,className:C,roundedClass:L,name:S,small:!0,onClick:q}):(0,a.jsx)(l.f.Trigger,{asChild:!0,type:"icon-only",children:(0,a.jsx)(i.h,{testId:"".concat(_||"project-action-menu","-action-menu-trigger"),noFocus:D,className:C,roundedClass:L,hoverBackgroundClass:n,name:S,small:!0})})}),(0,a.jsxs)(l.f.Content,{side:"bottom",align:"start",children:[J()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.f.Item,{onSelect:()=>{null==E||E("rename"),W(!0),$("rename-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"pencil",marginRight:!0}),"Rename"]}),t&&(0,a.jsxs)(l.f.Item,{onSelect:()=>{null==E||E("share"),K({isPrivate:Boolean(v),projectId:R,show:!0,workspaceId:F}),$("share-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"share",marginRight:!0}),"Share"]}),(0,a.jsx)(g.u,{textCenter:!1,title:v?"Share this project with everyone in the workspace":"Make this project only visible to people who are invited",placement:"right",children:(0,a.jsxs)(l.f.Item,{onSelect:()=>{null==E||E(v?"Share with team":"Make private"),Q(!v),$(v?"share-with-team-cta":"make-private-cta")},children:[v?(0,a.jsx)(d.J,{medium:!0,padding:!0,name:"lock-open",marginRight:!0}):(0,a.jsx)(d.J,{name:"lock",medium:!0,padding:!0,marginRight:!0}),v?"Share with team":"Make private"]})}),(0,a.jsx)(l.f.Separator,{})]}),z.on&&A&&P()&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.f.Item,{onSelect:()=>{null==E||E("download all"),A({id:R,title:N,isPrivate:v,isSystem:b}),$("download-all-cta")},children:[(0,a.jsx)(d.J,{name:"download",medium:!0,padding:!0,marginRight:!0}),"Download all as"]})}),J()&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.f.Separator,{}),(0,a.jsxs)(l.f.Item,{destructiveAction:!0,onSelect:()=>{null==E||E("delete project"),H(!0),$("delete-project-cta")},children:[(0,a.jsx)(d.J,{medium:!0,name:"delete",color:"text-red-500",marginRight:!0}),"Delete project"]})]})]}),(0,a.jsx)(m.i,{show:M,projectId:R,projectTitle:N,close:()=>W(!1)}),B&&(0,a.jsx)(u.x,{show:B,projectId:R,projectTitle:N,workspaceId:F,close:()=>H(!1),navigateToHomeAfterDelete:I})]})}):null};t.default=S},31850:function(e,t,n){n.d(t,{x:function(){return f}});var a=n(97458),o=n(96734),r=n(69826),s=n(84867),c=n(76558),l=n(52983),i=n(75800),d=n(80794),u=n(37268),m=n(79580),p=n(12112),h=n(88992),j=n(94575),x=n(77109);const f=e=>{let{close:t,navigateToHomeAfterDelete:n=!0,projectId:f,projectTitle:g,show:w,workspaceId:S}=e;const C=(0,c.useRouter)(),[k,v]=(0,i.useRecoilState)(p.QJ),[b,I]=(0,d.Db)(u.ac),D=(0,h.h)(S),A=(0,x.fK)(D),y=(0,l.useCallback)((async()=>{try{const e=await I({id:f});k&&k.projectId===f&&v(null),e.error||((0,r.Z9)(new r.$u({projectId:f,projectName:g,workspaceId:S})),n&&C.push("/"))}catch(e){throw e instanceof Error?new Error(e.message):new Error("Cannot delete project, an unexpected error occurred")}t()}),[t,I,f,k,v,g,S,C,n]),E=(0,o.SS)(s.AD.SHOW_RECENTLY_DELETED);return(0,a.jsx)(m.s,{title:(0,a.jsxs)("h3",{className:"text-lg leading-6 font-bold text-red-500 w-[90%]",children:['Delete "',g,'" project ?']}),body:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(j.h,{assetType:"project",count:1,isRecentlyDeletedFeatureEnabled:E.on,planType:A})}),buttonTitle:"Delete",showModal:w,onConfirm:y,closeCallback:t,confirmLoading:b.fetching,testId:"delete-project-modal"})}},80980:function(e,t,n){n.d(t,{i:function(){return h}});var a=n(97458),o=n(52983),r=n(46833),s=n.n(r),c=n(80794),l=n(37268),i=n(77109),d=n(60202),u=n(83565),m=n(91406),p=n(80951);const h=e=>{let{close:t,projectId:n,projectTitle:r,show:h}=e;const[,j]=(0,c.Db)(l.Y1),[x,f]=(0,o.useState)({}),[g,w]=(0,o.useState)(r),[S,C]=(0,o.useState)(!1),[k,v]=(0,o.useState)(""),b=(0,o.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),I=(0,o.useCallback)((async e=>{if(e.preventDefault(),g.length){C(!0);try{const e=await j({id:n,input:{title:g,slug:s()(g.toLowerCase())}});e.error?(C(!1),(0,i.I1)(e.error,x,f)):(C(!1),t())}catch(e){throw C(!1),new Error("An unexpected error occurred during project rename operation.")}}}),[t,x,n,g,j]),D=(0,o.useCallback)((()=>{t(),w(r),f({}),v("")}),[t,r]),A=(0,o.useCallback)((e=>{w(e.currentTarget.value.trimStart()),f({}),(0,d.s)(e.currentTarget.value.trimStart(),v)}),[]);return(0,o.useEffect)((()=>{w(r)}),[r]),(0,a.jsx)(m.ModalV2,{show:h,closeCallback:D,title:"Rename",paddingSize:"md",titleCssClass:"leading-6 text-gray900 font-bold",testId:"rename-project-modal",children:(0,a.jsx)("form",{onSubmit:I,children:(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)(p.I,{placeholder:"Project name",onChange:A,inputRef:b,value:g,error:(0,i.ie)("title",x)||k,maxLength:d.C})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsx)(u.z,{text:"Done",onClick:I,disabled:!g.length||S||k.length>0})})]})})})}},39087:function(e,t,n){n.d(t,{O:function(){return r}});var a=n(52983),o=n(79578);const r=e=>{let{scopes:t}=e;const n=(0,a.useCallback)((()=>Boolean(null==t?void 0:t.includes(o.l.DOWNLOAD))),[t]);return{hasUpdateAccess:(0,a.useCallback)((()=>Boolean(null==t?void 0:t.includes(o.l.FULL_ACCESS))),[t]),hasDownloadAccess:n}}},79578:function(e,t,n){var a;function o(e){return"object"==typeof e&&null!==e&&"folders"in e}n.d(t,{k:function(){return o},l:function(){return a}}),function(e){e.DOWNLOAD="download",e.FULL_ACCESS="full_access",e.VIEW="view"}(a||(a={}))}}]);