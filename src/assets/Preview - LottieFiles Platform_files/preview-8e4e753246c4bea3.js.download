(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9175,4697],{31202:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preview",function(){return s(35798)}])},37530:function(e,t,s){"use strict";s.d(t,{A:function(){return c}});var o=s(97458),a=s(83849),l=s.n(a),r=s(52983),n=s(68250),i=s(29602);const c=e=>{let{bold:t=!1,color:s,customWidth:a,disabled:c,fullMaxWidth:d=!1,hoverBackground:u=!1,icon:x,iconRight:f,onClick:p,showLoader:h=!1,smallIcon:m=!1,text:g}=e;const v=(0,r.useMemo)((()=>l()("relative flex items-center justify-center rounded-md text-sm bg-none focus:bg-none focus:outline-none disabled:bg-none disabled:opacity-30 disabled:cursor-not-allowed truncate",{"py-1 pl-2 pr-2":Boolean(x),"px-2 py-1":!x,"text-red-300 hover:text-red-500":"red"===s,"text-actionPrimary hover:text-actionPrimaryHover":"teal"===s,"text-orange-300 hover:text-orange-500":"orange"===s,"text-green-300 hover:text-green-500":"green"===s,"hover:bg-red-100":u&&"red"===s,"text-gray-900 hover:text-gray-800 hover:bg-gray-50":!s,"max-w-full":d,"opacity-90":h,"font-bold":t},a||"")),[x,s,u,d,h,t,a]);return(0,o.jsxs)("button",{type:"button",className:v,disabled:c||h,onClick:p,children:[h&&(0,o.jsx)("div",{className:"absolute top-0 left-0 z-10 flex items-center justify-center w-full h-full pointer-events-none",children:(0,o.jsx)(n.a,{type:"spinner",size:"3xs"})}),x&&(0,o.jsx)(i.J,{name:x,small:m,marginRight:!0,className:"flex-none"}),g,f&&(0,o.jsx)(i.J,{name:f,marginLeft:!0,small:!0,className:"flex-none"})]})}},64697:function(e,t,s){"use strict";s.r(t),s.d(t,{LoginWallModal:function(){return u}});var o=s(97458),a=s(70269),l=s(52983),r=s(83565),n=s(91406),i=s(57282),c=s(40288),d=s(68250);const u=e=>{let{closeCallback:t,description:s,redirectTo:u,showCloseButton:x,showLoading:f,showModal:p,title:h,utmSource:m}=e;const g=(0,l.useCallback)((()=>{t&&t()}),[t]),v=u?(0,a.O)("/register",u,m):"/register",b=u?(0,a.O)("/login",u,m):"/login",j=h||(0,o.jsxs)(o.Fragment,{children:["Letâ€™s get you an account first"," ",(0,o.jsx)("span",{role:"img","aria-label":"hands up",children:"ðŸ™Œ"})]}),y=s||"Please sign up or log in to continue. Weâ€™ve got thousands of free animations and a whole lot of handy tools just waiting for you!";return(0,o.jsxs)(n.ModalV2,{show:p,closeCallback:g,showCloseButton:x,paddingSize:"custom",customPadding:"0",size:"md",children:[f&&(0,o.jsx)(d.a,{type:"spinner"}),!f&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex flex-col px-20 pt-12 pb-8 mx-auto bg-gray-50",children:[(0,o.jsx)("span",{className:"font-arboria text-gray-900 text-2xl",children:j}),(0,o.jsx)("div",{className:"pb-2"}),(0,o.jsx)(i.Z,{variant:"content",children:y})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 mx-auto w-72",children:[(0,o.jsx)(c.r,{className:"flex w-full h-10",href:v,children:(0,o.jsx)(r.z,{text:"Sign up",fluid:!0})}),(0,o.jsx)("div",{className:"pt-4"}),(0,o.jsxs)(i.Z,{variant:"content",children:["Already have an account?",(0,o.jsx)(c.r,{className:"ml-1 text-actionPrimary",href:b,children:"Log in"})]})]})]})]})};t.default=u},70269:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});function o(e,t,s){const o=new URL(e,"https://accounts.lottiefiles.com");return t&&o.searchParams.set("return_to",t),s&&(o.searchParams.set("utm_medium","platform"),o.searchParams.set("utm_source",s)),o.toString()}},15466:function(e,t,s){"use strict";s.d(t,{p:function(){return a}});var o=s(52983);const a=()=>({openWithEditor:(0,o.useCallback)((e=>{var t;window.open("".concat("https://editor.lottiefiles.com","?src=").concat(encodeURIComponent("".concat("https://editor-integration-workflow.lottiefiles.com","/edit/").concat(e.id,"?hash=").concat(e.editHash,"&filename=editor.json"))).concat(e.backgroundColor?"&bg_color=".concat(null===(t=e.backgroundColor)||void 0===t?void 0:t.replace("#","")):"","&hash=").concat(e.editHash,"&fileUrl=").concat(encodeURIComponent(e.fileObject.url),"&origin=workflow&save2workflow=true&fileId=").concat(e.id),"_blank")}),[])})},35798:function(e,t,s){"use strict";s.r(t),s.d(t,{PreviewPage:function(){return De},PreviewPageContents:function(){return Se},default:function(){return Le}});var o=s(97458),a=s(45186),l=s.n(a),r=s(43006),n=s.n(r),i=s(76558),c=s(52983),d=s(43279),u=s(75800),x=s(11733),f=s(15118),p=s(44818),h=s(10400),m=s(74910);const g=e=>{let{children:t}=e;const{isAuthenticated:s}=(0,p.a)(),a=(0,u.useRecoilValue)(m.W),l=(0,u.useResetRecoilState)(m.W),r=(0,c.useCallback)((()=>{l()}),[l]);return s?(0,o.jsx)(h.W5,{children:(0,o.jsxs)(f.xc,{children:[t,a&&(0,o.jsx)(x.UpgradeModal,{show:!0,onCloseCallback:r,workspaceId:a.workspaceId,source:a.source,additionalParams:a.additionalParams,from:a.from})]})}):(0,o.jsx)(o.Fragment,{children:t})};var v=s(69826),b=s(83849),j=s.n(b),y=s(12810);const w=e=>{let{children:t,eventLabel:s,href:a,img:l,src:r}=e;return(0,o.jsx)("a",{href:a,onClick:()=>{s&&(0,v.Z9)(new v.Rd("button",s))},target:"_blank",rel:"noreferrer",className:j()("cursor-pointer mx-4"),children:(0,o.jsxs)("div",{className:"flex flex-col items-center",style:{width:"268px"},children:[(0,o.jsxs)("div",{className:"overflow-hidden rounded-xl",style:{width:"268px"},children:[l&&(0,o.jsx)("img",{src:r,style:{width:"268px"}}),!l&&(0,o.jsx)(y.J,{autoplay:!0,loop:!0,src:r,animationWidth:268,animationHeight:184.25})]}),(0,o.jsx)("h3",{className:"py-4 font-bold text-center text-gray-900",children:t})]})})};var C=s(96734),k=s(84867),N=s(90077),E=s.n(N),S=s(548),D=s(80794),L=s(6136),U=s(35586),I=s(15466),F=s(91105),P=s(53981),R=s(77109),A=s(95996);const _=e=>({folderId:e.folderId,projectId:e.projectId}),M=e=>{let{destination:t,editorKey:s,file:a,filename:l,isDotLottie:r,onStatusChange:n,source:d,status:u}=e;const[,x]=(0,D.Db)(F.v9),[,f]=(0,D.Db)(F.qM),[,p]=(0,D.Db)(P.cn),[h,m]=(0,c.useState)(),[g,b]=(0,c.useState)(""),[j,y]=(0,c.useState)(""),w=(0,c.useRef)(!1),C=(0,i.useRouter)(),k=a.type,N="project"===t.type||"folder"===t.type?t.workspaceId:"",E="project"===t.type||"folder"===t.type?t.projectId:"",{openWithEditor:M}=(0,I.p)(),T=C.query.source,z=(0,c.useCallback)((e=>{const t=new v.d4({reason:e,fileType:k,workspaceId:N,projectId:E,source:d});(0,v.Z9)(t)}),[k,E,d,N]),V=(0,c.useCallback)((async()=>{var e;const t=await p();if(null===(e=t.data)||void 0===e?void 0:e.fileUploadRequestCreate){const{fields:e,key:s,url:o}=t.data.fileUploadRequestCreate,l=await(0,R.Rl)({presignedPostData:{key:s,url:o,fields:e},file:a,onLoadStart:()=>{n({status:L.xD.Uploading})},onLoad:()=>{n({status:L.xD.Uploaded})},onError:()=>{n({status:L.xD.Errored,errorMessage:U.Ue}),z(v.ni.SAVE_FAILED)}});return m(l),void b(s)}t.error&&(n({status:L.xD.Errored,errorMessage:U.Ue}),z(v.ni.SAVE_FAILED))}),[a,n,z,p]),O=(0,c.useCallback)(((e,t)=>{const s=null==t?void 0:t.fileUpdate;return(null==s?void 0:s.versionId)&&y(s.versionId),e&&!w.current?{...e,...s}:s}),[]),[W]=(0,D.mU)({query:P.Rd,variables:{key:g},pause:!g},O);(0,c.useEffect)((()=>{u===L.xD.Waiting&&V()}),[u,V]);const q=(0,c.useCallback)((e=>{const{id:t}=e;"editor"===T?M(e):C.push("/animation/".concat(t))}),[M,T,C]);return(0,c.useEffect)((()=>{let e=!0;return u===L.xD.Uploaded&&j&&g&&(async()=>{var o;const a=await x({input:{name:l,fileKey:g,editorKey:s,fileVersionId:j,..._(t)}});if(e){if(null===(o=a.data)||void 0===o?void 0:o.fileCreate){var r,i;const{id:e}=null===(r=a.data)||void 0===r?void 0:r.fileCreate,t=new v.mw({fileId:e,fileType:k,source:d,projectId:E,workspaceId:N,origin:s?"@lottiefiles/editor":A.d,originVersion:s?null:A.J});return(0,v.Z9)(t),n({status:L.xD.Succeeded}),void q(null===(i=a.data)||void 0===i?void 0:i.fileCreate)}a.error&&(n({status:L.xD.Errored,errorMessage:U.Ue}),z(v.ni.SAVE_FAILED))}})(),()=>{e=!1}}),[u,E,N,j,g,l,k,d,q,t,r,x,z,n,s]),(0,c.useEffect)((()=>{if(u===L.xD.Uploaded){const e=setTimeout((async()=>{if(u===L.xD.Uploaded)try{const e=await f({input:{fileKey:g,name:l,..._(t)}});if(e.error)return n({status:L.xD.Errored,errorMessage:U.Ue}),void z(v.ni.SAVE_FAILED);e.data&&(q(e.data.fileCreateFallback),n({status:L.xD.Succeeded}))}catch(e){n({status:L.xD.Errored,errorMessage:U.Ue}),z(v.ni.SAVE_FAILED)}}),S.xC);return()=>{clearTimeout(e)}}return()=>{}}),[u,g,j,t,l,C,n,z,f,q]),(0,c.useEffect)((()=>{W.error&&u!==L.xD.Errored&&(n({status:L.xD.Errored,errorMessage:U.Ue}),z(v.ni.SAVE_FAILED))}),[u,W.error,z,n]),(0,c.useEffect)((()=>()=>{h&&h.abort()}),[h]),(0,o.jsx)(o.Fragment,{})};var T=s(68250),z=s(10074),V=s(57282),O=s(83565),W=s(42740),q=s(12112),B=s(49325),Z=s(78701);const H=e=>{let{maxFiles:t,onChange:s,rounded:a=!1,verb:l,videoUpload:r=!1}=e;const n=(0,u.useRecoilValue)(B.s),i=(0,u.useRecoilValue)(q.C$),d=(0,W.p)(),x=(0,c.useCallback)(((e,t)=>{var o,a,l;if(0===e.length&&t.length>0&&1===(null===(o=t[0])||void 0===o?void 0:o.errors.length)&&"too-many-files"===(null===(l=t[0])||void 0===l||null===(a=l.errors[0])||void 0===a?void 0:a.code))return null==d||d.pushInfo(U.p$),void s([...e,t[0].file],t.slice(1));t.length>0&&e.length<=0&&(null==d||d.pushError(U.De)),s(e,t)}),[s,d]),{getInputProps:f,getRootProps:p,isDragActive:h,open:m}=(0,z.uI)({accept:r?(0,L.v0)({objectArrayFormat:!0}):(0,L.DQ)({objectArrayFormat:!0}),onDrop:x,noClick:!1,noKeyboard:!0,maxFiles:t,multiple:void 0===t||t>1}),g=(0,c.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),m()}),[m]);return(0,o.jsxs)("div",{...p(),className:j()("border-2 border-gray-100 border-dashed",{"border-teal-600 bg-gray-50 bg-opacity-90":h,"rounded-lg":a}),children:[(0,o.jsx)("input",{type:"file",...f()}),!n&&(0,o.jsxs)("div",{className:"flex flex-col items-center my-6 space-y-4",children:[(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"126",height:"101",fill:"none",children:[(0,o.jsx)("path",{stroke:"#D9E0E6",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round",d:"M82.951 54.636s-3.39-.442-6.862 3.17c-5.304 5.519-9.507 17.39-15.44 22.187-3.539 2.86-5.147 2.818-5.147 2.818"}),(0,o.jsx)("path",{fill:"#D9E0E6",d:"M32.021 38.537c6.566-7.087 13.128-14.175 19.694-21.262.648-.701 1.62-.723 2.523-.451 14.01-1.484 28.151-1.276 42.105.715.882.127 1.8.5 2.58 1.05.56.078 1.094.24 1.385.374 1.456.663 2.742 1.991 2.757 3.634l.627 74.373c.319.662.379 1.3.014 1.734 0 .162.004.324.004.486.014 1.653-2.654 1.047-3.469.673a5.776 5.776 0 0 1-.865-.51c-10.442.352-20.888.708-31.33 1.06l-16.462.557c-2.743.092-5.489.187-8.231.278-2.29.078-4.408.265-6.492-.835-4.556-2.403-3.901-7.02-3.99-11.422-.11-5.403-.216-10.802-.326-16.205l-.659-32.751c-.233-.532-.262-1.068.135-1.498zm6.073 3.718-1.527.86c8.008.786 16.048.776 24.049-.01-1.73-7.239-2.637-12.16-5.826-18.877-5.566 6.013-11.133 12.018-16.696 18.027zm.883 43.91.138 6.946c.003.257.209 1.977.205 2.985.33-.01.656-.021.985-.035l57.158-1.935c-.202-23.874-.4-47.75-.603-71.625a165.329 165.329 0 0 0-37.68-.634c2.725 6.358 5.978 15.317 8.037 24.558.18.803-.337 1.604-1.184 1.699-8.986 1-18.06 1.085-27.056.197-.794-.078-1.613-.391-2.328-.86.145 7.19 1.877 16.462 2.02 23.651.106 5.022.205 10.037.308 15.053z"}),(0,o.jsx)("path",{stroke:"#D9E0E6",strokeWidth:2,d:"M113.422 8.385c.061-1.933.204-5.651-.101-5.737-.305-.086-1.785 2.98-2.706 4.702-.896 1.682-4.15.94-4.356 1.527-.094.27 1.983 1.501 2.307 3.4.372 2.212-.423 5.72-.056 5.863.358.137 1.586-2.886 3.44-4.459 1.732-1.474 4.101-1.486 4.182-1.715.175-.48-2.771-1.68-2.71-3.581z"}),(0,o.jsx)("path",{fill:"#D9E0E6",d:"M118.498 25.133c-.303-1.91-.861-5.589-1.177-5.616-.316-.027-1.194 3.263-1.774 5.127-.564 1.82-3.9 1.702-3.993 2.318-.041.282 2.231 1.102 2.905 2.905.781 2.104.659 5.7 1.046 5.77.378.067 1.016-3.132 2.542-5.026 1.425-1.772 3.749-2.23 3.785-2.47.083-.503-3.037-1.128-3.334-3.008zM9.78 38.979c-.302-1.91-.86-5.59-1.176-5.616-.316-.027-1.194 3.263-1.775 5.126-.564 1.82-3.9 1.703-3.992 2.319-.041.282 2.23 1.102 2.905 2.905.78 2.103.659 5.699 1.046 5.77.377.067 1.016-3.132 2.542-5.026 1.424-1.773 3.748-2.23 3.785-2.47.082-.503-3.037-1.129-3.335-3.008z"})]}),(0,o.jsx)("div",{className:"text-center",children:r?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"text-base font-bold text-gray-300",children:"GIF / PNG sequence (in zip) / MP4 / WebM / MOV "}),(0,o.jsxs)("p",{className:"text-xs text-gray-300",children:["(Max ",U.nF,")"]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"text-base font-bold text-gray-300",children:"Lottie JSON / dotLottie"}),(0,o.jsxs)("p",{className:"text-xs text-gray-300",children:["(Max ",U.bg,")"]})]})}),(0,o.jsxs)("div",{className:"flex flex-col items-center",children:[i.defaultType===Z.A.VIDEO&&i.show&&(0,o.jsx)("p",{className:"text-xl font-bold text-center text-gray-600 ",children:"Drag & drop video or image sequence to upload"}),!(i.defaultType===Z.A.VIDEO&&i.show)&&t&&1===t&&(0,o.jsxs)("p",{className:"text-xl font-bold text-center text-gray-600 ",children:["Drag & drop animation to ",l.toLowerCase()]}),!(i.defaultType===Z.A.VIDEO&&i.show)&&!t&&(0,o.jsxs)("p",{className:"text-xl font-bold text-center text-gray-600",children:["Drag & drop animations to ",l.toLowerCase()]}),(0,o.jsx)("span",{className:"mb-2 text-gray-600",children:"or"}),(0,o.jsx)(O.z,{text:"Browse",customClasses:"text-base font-bold text-white bg-actionPrimary hover:bg-actionPrimaryHover disabled:bg-teal-600 py-2 px-4 rounded-xl",onClick:g})]})]}),n&&!r&&(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-24",children:[(0,o.jsx)(T.a,{type:"lottie",size:"lg"}),(0,o.jsx)("div",{className:"p-2"}),(0,o.jsx)(V.Z,{variant:"content",color:"gray",darker:!0,children:"Uploading..."})]})]})};var J=s(66799),Q=s(37530),K=s(38018),G=s(18212);const X=e=>{let{onClick:t}=e;const s=(0,u.useRecoilValue)(q.QJ),a=(0,c.useMemo)((()=>s&&s.isSystem&&"Drafts"===s.name),[s]),l=(0,c.useMemo)((()=>a?"My Drafts":null==s?void 0:s.name),[s,a]),r=(0,c.useMemo)((()=>(0,o.jsx)("span",{className:"text-sm truncate",children:l||"Select Project"})),[l]),n=(0,c.useMemo)((()=>a?"file":(null==s?void 0:s.isPrivate)?"lock-fill":"folder"),[a,s]);return(0,o.jsx)("div",{className:"flex flex-row-reverse w-full",children:(0,o.jsx)(Q.A,{text:r,smallIcon:!0,icon:n,iconRight:"chevron-down-fill",onClick:t,customWidth:"w-auto"})})},Y=c.forwardRef(((e,t)=>{let{disabled:s,modalTitle:a,selectButtonText:l,selectionCallback:r}=e;const[n,i]=(0,c.useState)(!1),{workspaces:d}=(0,h.cF)(),u=(0,C.SS)(k.AD.ENABLE_LOCATION_SELECTOR_V2).on,x=(0,c.useCallback)((()=>{s||i(!0)}),[s]),f=(0,c.useCallback)((()=>{i(!1)}),[]);return(0,c.useImperativeHandle)(t,(()=>({openProjectSelector:()=>{x()}}))),0===d.length?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)("div",{className:"flex justify-end w-full",children:[(0,o.jsx)(J.O,{}),(0,o.jsx)(X,{onClick:x}),u?(0,o.jsx)(K.M,{title:a,show:n,close:f,onSelect:r,selectButtonText:l}):(0,o.jsx)(G.Z,{title:a,show:n,close:f,onSelect:r,selectButtonText:l})]})}));Y.displayName="PathSelector";var $=s(80951);const ee=e=>{let{onChange:t,verb:s}=e;const[a,l]=(0,c.useState)(!1),[r,n]=(0,c.useState)(""),[i,d]=(0,c.useState)(""),u=(0,c.useCallback)((()=>{l(!0)}),[]),x=(0,c.useCallback)((e=>{n(e.target.value)}),[]),f=(0,c.useCallback)((e=>{e&&e.focus()}),[]),p=(0,c.useCallback)((async()=>{if(/(http|https):\s*/u.test(r))try{var e,s;const o=await(await fetch(r)).blob(),a=new File([o],r.split("/").reverse()[0],{lastModified:(new Date).getTime(),type:o.type});(0,v.Z9)(new v.Cu({method:L.gc.URL,source:null===(s=window)||void 0===s||null===(e=s.location)||void 0===e?void 0:e.href,fileCount:1})),t(a),d("")}catch(e){d("Animation upload from URL failed.")}else d("Please use a valid URL.")}),[r,t]);return(0,o.jsxs)(o.Fragment,{children:[!1===a&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsxs)("button",{type:"button",onClick:u,className:"h-10 text-sm text-gray-600 underline hover:text-actionPrimaryHover focus:outline-none",children:[s," animation from URL"]})}),a&&(0,o.jsxs)("div",{className:"flex space-x-4",children:[(0,o.jsxs)("div",{id:"url-label",className:"pt-1.5 text-sm text-gray-600 whitespace-nowrap",children:[s," from URL:"]}),(0,o.jsx)("div",{className:"flex-grow",children:(0,o.jsx)($.I,{inputRef:f,error:i,type:"text",id:"animationUrl",placeholder:"Enter .json / .lottie URL","aria-labelledby":"url-label",onChange:x})}),(0,o.jsx)("div",{className:"pt-0.5",children:(0,o.jsx)(O.z,{text:"Open",disabled:!r,onClick:p})})]})]})},te=e=>{let{dropzoneRounded:t=!1,dropzoneVerb:s="Upload",isUploading:a,maxFiles:l,onDropZoneChange:r,onUploadFromUrlChange:n,pathSelectorModalTitle:i,showPathSelector:c,urlInputVerb:d="Upload",videoUpload:u=!1}=e;return(0,o.jsxs)(o.Fragment,{children:[c&&(0,o.jsx)("div",{className:"grid items-center content-center grid-cols-5 pb-4 text-center sm:pb-4 sm:mt-0 sm:text-left",children:(0,o.jsx)("div",{className:"flex items-end col-span-full",children:(0,o.jsx)(Y,{modalTitle:i})})}),(0,o.jsx)("div",{className:"relative flex flex-col",children:(0,o.jsxs)("div",{className:"space-y-2",children:[a?(0,o.jsxs)("div",{className:"border-2 border-gray-100 border-dashed flex flex-col items-center justify-center p-6 min-h-[329px] rounded-lg",children:[(0,o.jsx)(T.a,{}),(0,o.jsx)("span",{className:"text-sm mt-4 text-gray-500",children:"Uploading..."})]}):(0,o.jsx)(H,{onChange:r,maxFiles:l,verb:s,rounded:t,videoUpload:u}),!u&&(0,o.jsx)(ee,{onChange:n,verb:d})]})})]})};var se=s(87850);const oe=e=>{let{isUploadInProgress:t,onStageFile:s,source:a}=e;const l=(0,W.p)(),r=(0,c.useCallback)(((e,t)=>{e&&(0,L.hQ)({file:e,source:t}).then((e=>{s({file:e})})).catch((()=>{}))}),[s]),n=(0,c.useCallback)(((e,t)=>{if(e.length>0)return r(e[0]),void(e.length>1&&(null==l||l.pushInfo(U.Ie)));if(t.length>0){const e=t.find((e=>{var t;return 1===e.errors.length&&"too-many-files"===(null===(t=e.errors[0])||void 0===t?void 0:t.code)}));if(e)return r(e.file),void(null==l||l.pushInfo(U.Ie));null==l||l.pushError(U.hh)}}),[r,l]),i=(0,c.useCallback)((e=>{e&&r(e,se.yx.URL)}),[r]);return(0,o.jsx)(te,{isUploading:t,maxFiles:1,dropzoneVerb:"editor"===a?"Edit":"Preview",pathSelectorModalTitle:"Select save location",urlInputVerb:"editor"===a?"Edit":"Preview",showPathSelector:!0,dropzoneRounded:!0,onDropZoneChange:n,onUploadFromUrlChange:i})};var ae=s(78018),le=s(64697),re=s(1660),ne=s(76682),ie=s(98315),ce=s(24304);const de=e=>{let{backgroundColor:t,dataUrl:s,filename:a,formatVersion:l,isDotLottie:r,isSaving:n,onClose:i,onFilenameChange:d,onSaveClick:x,show:f,source:p}=e;const h=(0,u.useRecoilValue)(q.QJ),m=(0,c.useRef)(null),[g,v]=(0,c.useState)(!1),b=(0,c.useCallback)((e=>{n||d(e)}),[n,d]),y=(0,c.useCallback)((()=>{n||null==i||i()}),[n,i]),w=(0,c.useCallback)((()=>{v(!0)}),[v]),C=(0,c.useCallback)((()=>{var e;h?x():null===(e=m.current)||void 0===e||e.openProjectSelector()}),[x,h,m]);return(0,c.useEffect)((()=>{h&&g&&(v(!1),x())}),[h,g,x]),(0,o.jsx)(ne.H,{titleCssClass:"text-xl font-bold",title:"Save animation to workspace",show:f,closeCallback:y,titleSeparator:!1,contentPadding:"p-6 pt-0",headerPadding:"p-6 pb-5",size:"upload",footerPadding:"p-6 pt-0",footerSeparator:!1,contentYScroll:!1,minHeight:"350px",closeOnEscape:!1,footer:(0,o.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,o.jsx)(O.z,{text:"Cancel",additionalClass:"!border-0 focus:!border-0 font-bold active:border-0 h-10 rounded-xl",variant:"ghost",onClick:y,disabled:n}),(0,o.jsx)(O.z,{showLoader:n,text:"editor"===p?"Save & open in Editor":"Save",additionalClass:"text-base font-bold h-10 rounded-xl",onClick:C,disabled:!s})]}),children:(0,o.jsxs)("div",{className:"flex flex-col h-full mt-1 overflow-hidden",children:[(0,o.jsx)(ie.Q,{destination:h,verb:"save"}),(0,o.jsxs)("div",{className:"flex flex-col flex-grow h-full space-y-4",children:[(0,o.jsxs)("div",{className:"flex mb-3 -mr-2",children:[(0,o.jsx)("div",{className:"w-full max-w-[250px]",children:(0,o.jsx)(re.T,{value:a,disabled:n,onChange:b})}),(0,o.jsx)("div",{className:"w-full max-w-[250px] ml-auto",children:(0,o.jsx)(Y,{disabled:n,ref:m,selectionCallback:w,modalTitle:"Select save location",selectButtonText:"Save"})})]}),(0,o.jsxs)("div",{className:j()("my-8 flex flex-col flex-grow h-full max-h-[359px]",{"items-center space-y-6 justify-center":!s}),children:[!s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(T.a,{type:"lottie",size:"md",loaderOnly:!0}),(0,o.jsx)(V.Z,{color:"gray",darker:!0,children:"Fetching..."})]}),s&&(0,o.jsx)(ce.c,{backgroundColor:t,isDotLottie:Boolean(r),src:s,formatVersion:l})]})]})]})})};var ue,xe=s(6566),fe=s(29278),pe=s(92927);!function(e){e[e.Initial=0]="Initial",e[e.Staging=1]="Staging",e[e.Uploading=2]="Uploading",e[e.Creating=3]="Creating",e[e.Succeeded=4]="Succeeded",e[e.Errored=5]="Errored",e[e.Unqueued=6]="Unqueued"}(ue||(ue={}));const he=E()((async()=>Promise.all([s.e(6205),s.e(4593)]).then(s.bind(s,64593))),{loadableGenerated:{webpack:()=>[64593]},ssr:!1}),me="https://creator.lottiefiles.com",ge=async e=>new Promise(((t,s)=>{const o=new FileReader;o.onload=e=>{var o;(null===(o=e.target)||void 0===o?void 0:o.result)?t(e.target.result):s(new Error("Failed to read file"))},o.readAsDataURL(e)})),ve=()=>{const{isAuthenticated:e}=(0,p.a)(),{query:t,...s}=(0,i.useRouter)(),[a,l]=(0,c.useState)(!1),[r,n]=(0,u.useRecoilState)(B.s),d=(0,C.SS)(k.AD.PREVIEW_PAGE_V2),x=t.fileUrl,f=t.name,h=t.key,g=t.utm_medium,b=t.from,[y,w]=(0,c.useState)(null),[N,E]=(0,c.useState)(""),[I,P]=(0,c.useState)(null),A=(0,u.useRecoilValue)(q.QJ),[_,T]=(0,c.useState)(),[z,V]=(0,c.useState)(0),O=z>=2&&z<=4,[H,J]=(0,c.useState)(!1),[Q,K]=(0,c.useState)(),G=(0,W.p)(),[X,Y]=(0,u.useRecoilState)(q.C$),[$,ee]=(0,c.useState)(!1),te=(0,C.SS)(k.AD.ENABLE_VIDEO_TO_LOTTIE),re=(0,u.useSetRecoilState)(m.W),ne=t.source,ie=t.bg_color,ce=O,ue=ie?"#".concat(ie):void 0,ve="folder"===(null==A?void 0:A.type)||"project"===(null==A?void 0:A.type)?A.workspaceId:"",{fileLimit:be,hasFileLimit:je,isFetchingFileCount:ye,willExceedFileLimit:we}=(0,pe.F)(ve),[,Ce]=(0,D.Db)(F.Q2),ke=(0,c.useCallback)(((e,t,s)=>{const o=new v.d4({reason:e,hasBreakingNodes:t,errors:s});(0,v.Z9)(o)}),[]),Ne=(0,c.useCallback)((async e=>{if(!(0,L.A6)((null==e?void 0:e.type)||"none")&&"lottie"!==(null==e?void 0:e.name.split(".").slice(-1)[0])){const e=U.De;return null==G||G.pushError(e),ke(v.ni.WRONG_FORMAT),!1}if((null==e?void 0:e.size)>S.Sy){const e=U.ft;return null==G||G.pushError(e),ke(v.ni.FILE_SIZE),!1}const t=await(0,fe.NH)(e);return!!t.ok||(null==G||G.pushError(t.status),"error"===t.status&&ke(v.ni.VALIDATION_FAILED,t.hasBreakingNodes,t.errors),!1)}),[ke,G]),Ee=(0,c.useMemo)((()=>{if("string"==typeof x)try{const e=new URL(x);if("https:"===e.protocol||"http:"===e.protocol)return x}catch(e){}return""}),[x]),Se=window.location.href,De=(0,c.useCallback)((async e=>{if(e&&e.blob){const o=await Ce({filename:e.filename});if(o.data){n(!0);(await fetch(o.data.workflowTempFileUploadRequestCreate.preSignedUploadURL,{method:"put",body:e.blob,headers:{"Content-Type":e.blob.type}})).ok&&s.push({query:{...t,fileUrl:o.data.workflowTempFileUploadRequestCreate.publicReadURL,...h?{key:h}:{}}}),n(!1)}}}),[Ce,n,s,t,h]),Le=(0,c.useCallback)((e=>{let{file:t,url:s}=e;w(s),E(f?f.toString():(e=>{const t=e.lastIndexOf(".");return-1===t?e:e.substring(0,t)})(t.filename)),K(null),P(t),V(1),je&&we(1)||d.off||"creator"===g||!A?((0,v.Z9)(new v.xK({source:ne,workspaceId:ve||"",destination:(null==A?void 0:A.type)||""})),H||J(!0)):(T(A),V(2))}),[A,je,d.off,f,ne,g,we,ve,H]),Ue=(0,c.useCallback)((async t=>{let{file:s}=t;if(!s.blob)return;if(!await Ne(s.blob))return;if(!e)return void await De(s);const o=await ge(s.blob);Le({file:s,url:o})}),[e,De,Ne,Le]),Ie=(0,c.useCallback)((async e=>{let{file:t}=e;t.blob&&((0,R.BM)(t.blob)?K(t.blob):Ue({file:t}))}),[Ue]),Fe=(0,c.useCallback)((()=>{l(!1)}),[]),Pe=(0,c.useCallback)((e=>{E(e)}),[]),Re=(0,c.useCallback)((()=>{w(""),E(""),K(null),P(null),J(!1),V(0),"creator"===g?(b&&b.includes(me)?s.push(b):s.push(me),ee(!0)):s.push({query:{...t,fileUrl:"",...h?{key:h}:{}}})}),[s,t,h,g,b]),Ae=(0,c.useCallback)((()=>{I&&A&&(je&&we(1)?ve&&re({source:k.pj.FILE_UPLOAD_LIMIT_EXCEEDED,workspaceId:ve,additionalParams:{fileLimit:be}}):(T(A),V(2)))}),[I,A,je,we,ve,re,be]),_e=(0,c.useCallback)((async e=>{P((t=>({...t,...e}))),e.status===L.xD.Errored?(V(5),null==G||G.pushError(e.errorMessage)):e.status===L.xD.Unqueued?V(6):e.status===L.xD.Uploaded?V(3):e.status===L.xD.Succeeded&&V(4)}),[G]);(0,c.useEffect)((()=>{let t=!0;const s=()=>{t=!1};if(!Ee)return s;if(!e)return l(!0),s;if(ye)return s;if(z>=1)return s;return $||(async()=>{const e=await(0,R.WP)(Ee);if((0,R.BM)(e))return void K(e);if(!Ne(e))return;const s=await ge(e);t&&(0,L.hQ)({file:e,source:se.yx.URL}).then((e=>{Le({url:s,file:e})})).catch((()=>{}))})(),s}),[z,Le,Ee,e,ye,$,Ne]);const Me=(0,c.useCallback)((e=>{const t=e[0];Ue({file:t}),K(null)}),[Ue]),Te=(0,c.useCallback)((e=>{null==G||G.pushError(e),Re()}),[G,Re]),ze=(0,c.useCallback)((()=>{e?Y({show:!0,defaultType:Z.A.VIDEO,onlyDefaultType:!0}):l(!0)}),[e,Y]);return(0,ae.P)({file:Q,onError:Te,onQueueZipEntries:Me}),(0,o.jsxs)("div",{className:j()({"pointer-events-none":r}),children:[(0,o.jsx)(oe,{isUploadInProgress:ce,source:ne,onStageFile:Ie,hidePathSelectorTooltip:!1}),!e&&a&&(0,o.jsx)(le.LoginWallModal,{redirectTo:Se,showModal:a,closeCallback:Fe,utmSource:"preview_page"}),e&&H&&(0,o.jsx)(de,{backgroundColor:ue,source:ne,dataUrl:y,isSaving:O,filename:N,formatVersion:null==I?void 0:I.formatVersion,isDotLottie:null==I?void 0:I.isDotLottie,show:H&&e,onClose:Re,onFilenameChange:Pe,onSaveClick:Ae}),O&&void 0!==(null==I?void 0:I.blob)&&null!==I.blob&&_&&(0,o.jsx)(M,{editorKey:h,destination:_,file:I.blob,filename:N,status:I.status,isDotLottie:I.isDotLottie,source:I.source,onStatusChange:_e}),te.on&&(0,o.jsx)("div",{className:"w-full mt-1 mb-2 text-center",children:(0,o.jsx)("button",{type:"button",onClick:ze,className:"text-sm text-gray-600 underline hover:text-actionPrimaryHover focus:outline-none",children:"Convert video and image sequences to Lottie"})}),(0,o.jsx)(xe.c,{children:(0,o.jsx)(he,{showDropContainer:!1,showUploadModal:X.show,defaultUploadType:X.defaultType,onlyDefaultUploadType:X.onlyDefaultType,onUploadModalClose:()=>Y((e=>({...e,show:!1}))),svgFile:X.svgFile})})]})};var be=s(29602),je=s(40288),ye=s(70776),we=s(39290);const Ce=e=>{let{children:t}=e;const{isAuthenticated:s,loading:a}=(0,p.a)(),{setLoading:l}=(0,ye.r)();return(0,c.useEffect)((()=>{a||s||(l("auth",!1),l("workspaces",!1))}),[s,a,l]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(we.k,{}),t]})},ke="Preview Lottie animation",Ne="Easily edit & customize Lottie animations",Ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return"editor"===e?Ne:ke},Se=()=>{const e="".concat("https://lottiefiles.com"),{query:t}=(0,i.useRouter)(),s=t.source,{isLoading:a}=(0,ye.r)();return a?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("div",{className:"px-4 pb-12 bg-white md:px-0",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,o.jsx)(je.r,{href:"/",className:"block h-full leading-none",children:(0,o.jsx)(n(),{src:d.Z,width:"180",height:"36",alt:"logo",style:{maxWidth:"100%",height:"auto"}})}),(0,o.jsx)(je.r,{href:"/",className:"flex items-center px-4 py-2 text-base font-bold text-center border border-gray-300 rounded-md hover:border-gray-600",children:"Go to Dashboard"})]}),(0,o.jsxs)("div",{className:"flex flex-col items-center pb-8 mx-auto text-center max-w-[790px]",children:[(0,o.jsxs)("h1",{className:"text-4xl font-bold text-gray-900",children:[Ee(s)," "]}),"editor"!==s&&(0,o.jsx)("h2",{className:"mt-2 text-xl font-normal text-gray-500",children:"Save this animation to your workspace to preview it, test it across platforms, customize its colors, optimize its size, host it on our CDN and so much more."})]}),(0,o.jsx)("div",{className:"pb-3 mx-auto w-full max-w-[790px]",children:(0,o.jsx)(ve,{})}),(0,o.jsxs)("div",{className:"flex w-full mx-auto bg-green-100 rounded-lg max-w-[790px]",children:[(0,o.jsx)("div",{className:"flex items-center justify-center w-16 bg-green-300 rounded-l-lg",children:(0,o.jsx)(be.J,{name:"lock-fill-2",color:"text-white",medium:!0})}),(0,o.jsx)("p",{className:"p-3 text-xs text-green-700",children:"Files you open here are only accessible to you and are securely stored. You can choose to make your animations public by publishing them."})]})]}),(0,o.jsxs)("div",{className:"w-full pt-12 pb-8 mx-auto h-2/5",children:[(0,o.jsx)("div",{className:"w-5/6 pb-12 mx-auto text-2xl font-bold text-center text-gray-900 md:w-3/5 text-pretty",children:"Handy tools and features for your motion design workflow"}),(0,o.jsxs)("div",{className:"flex flex-wrap justify-center pb-4 mx-auto space-y-4 md:space-y-0 xl:w-full md:w-3/4 sm:w-2/3",children:[(0,o.jsx)(w,{href:"".concat(e,"/plugins/after-effects"),src:"/images/preview-page/AE.png",eventLabel:"preview page - after effects card",img:!0,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-normal text-gray-500",children:"LottieFiles for After Effects"}),(0,o.jsx)("p",{className:"text-pretty",children:"Save your animation creations in After Effects directly to your workspace"})]})}),(0,o.jsx)(w,{href:"".concat(e,"/plugins/figma"),src:"/images/preview-page/Figma.png",eventLabel:"preview page - figma card",img:!0,children:(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-normal text-gray-500",children:"LottieFiles for Figma"}),(0,o.jsx)("p",{className:"text-pretty",children:"Create and save production-ready animations to your workspace within Figma"})]})}),(0,o.jsx)(w,{href:"".concat(e,"/features/optimize-lottie"),src:"https://lottie.host/35a5f1e1-6cf3-4115-8ccb-41b417491f83/LmUsWNVBfY.json",eventLabel:"preview page - optimized lottie card",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-normal text-gray-500",children:"Lottie Optimizer"}),(0,o.jsx)("p",{className:"text-pretty",children:"Significantly reduce animation file sizes for faster load speeds"})]})}),(0,o.jsx)(w,{href:"".concat(e,"/features/color-palette"),src:"https://assets5.lottiefiles.com/packages/lf20_7jpkcvlb.json",eventLabel:"preview page - color palette card",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-xs font-normal text-gray-500",children:"Color Palette"}),(0,o.jsx)("p",{className:"text-pretty",children:"Customize animations to your preferences or brand colors"})]})})]})]}),(0,o.jsx)("div",{className:"flex justify-center pb-12",children:(0,o.jsx)(je.r,{href:"".concat(e,"/features"),target:"_blank",children:(0,o.jsx)(O.z,{text:"See more features",fontClasses:"font-bold",padding:"py-2 px-4"})})})]})},De=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l(),{children:(0,o.jsx)("title",{children:"Preview - LottieFiles Platform"})}),(0,o.jsx)(Se,{})]});De.getLayout=e=>(0,o.jsx)(g,{children:(0,o.jsx)(Ce,{children:e})}),De.showUnauthorizedView=!1,De.shouldHaveAccessToWorkflow=!1;var Le=De}},function(e){e.O(0,[5299,4235,3139,2108,2888,9774,179],(function(){return t=31202,e(e.s=t);var t}));var t=e.O();_N_E=t}]);