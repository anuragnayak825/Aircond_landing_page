"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4153],{84153:function(e,t,n){n.r(t),n.d(t,{WorkspaceCollectionActionMenu:function(){return I},default:function(){return S}});var l=n(97458),o=n(52983),a=n(80794),s=n(75800),c=n(95931),i=n(98532),r=n(29602),d=n(31401),m=n(9744),u=n(69826),h=n(54805),p=n(77109),x=n(60202),g=n(83565),k=n(91406),v=n(80951);const w=e=>{let{close:t,collection:n,show:s}=e;const[,c]=(0,a.Db)(h.hr),[i,r]=(0,o.useState)({}),[d,m]=(0,o.useState)(n.name),[w,f]=(0,o.useState)(!1),[C,j]=(0,o.useState)(""),b=(0,o.useCallback)((e=>{e&&(e.focus(),e.select())}),[]),I=(0,o.useCallback)((async e=>{if(e.preventDefault(),d.length){r({}),f(!0);try{const e=await c({id:n.id,input:{name:d}});e.error?(f(!1),(0,p.I1)(e.error,i,r)):(f(!1),t(),(0,u.Z9)(new u.iu({collectionId:n.id,collectionName:d,workspaceId:n.workspaceId})))}catch(e){throw f(!1),new Error("An unexpected error occurred during collection rename operation.")}}else r({name:"Name is required"})}),[n,t,i,d,c]),S=(0,o.useCallback)((()=>{t(),m(n.name),r({}),j("")}),[n.name,t]),N=(0,o.useCallback)((e=>{m(e.currentTarget.value.trimStart()),(0,x.s)(e.currentTarget.value.trimStart(),j)}),[]);return(0,l.jsx)(k.ModalV2,{show:s,title:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("h3",{className:"text-lg leading-6 text-gray-900 font-bold",children:"Rename"})}),closeCallback:S,testId:"rename-workspace-collection-modal",children:(0,l.jsx)("form",{onSubmit:I,children:(0,l.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsx)(v.I,{placeholder:"Collection name",onChange:N,inputRef:b,value:d,error:(0,p.ie)("name",i)||C,maxLength:x.C})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(g.z,{text:"Done",onClick:I,disabled:!d.length||w||C.length>0})})]})})})};var f=n(81725),C=n(36788),j=n(33345),b=n(10400);const I=e=>{let{children:t,collection:n,fromSidebar:p,iconSizeClass:x,isHovered:g,navigateToHomeAfterDelete:k=!0,onOpenChange:v,onSelect:I,source:S}=e;const{hasUpdateAccess:N}=(0,C.S)({scopes:n.collectionPermissionScopes}),[y,P]=(0,o.useState)(!1),[z,T]=(0,o.useState)(!1),[D,R]=(0,o.useState)(!1),A=(0,s.useSetRecoilState)(j.T),{activeWorkspace:E}=(0,b.cF)(),[,M]=(0,a.Db)(h.nE),{isWorkspaceSuspended:_,openSuspendedWorkspaceModal:B}=(0,f.q)(n.workspaceId),H=(0,o.useCallback)((e=>{M({id:n.id,isPrivate:e})}),[n.id,M]),J=(0,o.useCallback)((e=>{(0,u.Z9)(new u.jU({action:"click",label:e,source:S}))}),[S]);return N()?(0,l.jsx)("div",{className:"flex items-center mr-1 ".concat(g||D?"visible":"invisible"),children:(0,l.jsxs)(c.f,{onOpenChange:e=>{R(e),null==v||v(e),e&&J("open-collection-action-menu")},children:[_?t||(0,l.jsx)(i.h,{name:"meatball-menu",small:p,sizeClass:x,darker:!p,onClick:B,testId:"workspace-collection-action-menu-trigger-suspended"}):(0,l.jsx)(c.f.Trigger,{asChild:!0,type:"icon-only",children:t||(0,l.jsx)(i.h,{tooltip:"Rename, permission, and more...",tooltipPlacement:"top",name:"meatball-menu",sizeClass:x,small:p,darker:!p,testId:"workspace-collection-action-menu-trigger"})}),(0,l.jsxs)(c.f.Content,{side:"bottom",align:"start",children:[(0,l.jsxs)(c.f.Item,{onSelect:e=>{null==I||I("rename"),e.stopPropagation(),P(!0),J("rename-collection-cta")},testId:"workspace-collection-action-menu-rename-button",children:[(0,l.jsx)(r.J,{medium:!0,name:"pencil",marginRight:!0}),"Rename"]}),(0,l.jsxs)(c.f.Item,{onSelect:e=>{e.stopPropagation(),null==I||I("share"),A({show:!0,collectionId:n.id,isPrivate:Boolean(n.isPrivate),workspaceId:n.workspaceId,workspaceIcon:(null==E?void 0:E.icon)||"",workspaceName:(null==E?void 0:E.name)||""}),J("share-collection-cta")},testId:"workspace-collection-action-menu-share-button",children:[(0,l.jsx)(r.J,{medium:!0,name:"share",marginRight:!0}),"Share"]}),(0,l.jsx)(d.u,{textCenter:!1,title:n.isPrivate?"Share this collection with everyone in the workspace":"Make this collection only visible to people who are invited",placement:"right",children:(0,l.jsxs)(c.f.Item,{onSelect:e=>{e.stopPropagation(),null==I||I(n.isPrivate?"share with team":"make private"),H(!n.isPrivate),J(n.isPrivate?"share-collection-with-team-cta":"make-collection-private-cta")},testId:"workspace-collection-action-menu-share-with-team-button",children:[n.isPrivate?(0,l.jsx)(r.J,{medium:!0,padding:!0,name:"lock-open",marginRight:!0}):(0,l.jsx)(r.J,{name:"lock",medium:!0,padding:!0,marginRight:!0}),n.isPrivate?"Share with team":"Make private"]})}),(0,l.jsx)(c.f.Separator,{}),(0,l.jsx)(c.f.Item,{asChild:!0,destructiveAction:!0,onSelect:e=>{null==I||I("delete"),e.stopPropagation(),T(!0),J("delete-collection-cta")},testId:"workspace-collection-action-menu-delete-button",children:(0,l.jsxs)("div",{className:"flex items-center text-sm rounded cursor-pointer hover:bg-red-100 ",children:[(0,l.jsx)(r.J,{medium:!0,name:"delete",color:"text-red-500",marginRight:!0}),(0,l.jsx)("div",{className:"text-red-500",children:" Delete collection"})]})})]}),(0,l.jsx)(w,{collection:n,show:y,close:()=>{P(!1)}}),(0,l.jsx)(m.a,{show:z,collectionId:n.id,workspaceId:n.workspaceId,name:n.name,close:()=>{T(!1)},navigateToHomeAfterDelete:k})]})}):null};var S=I},79580:function(e,t,n){n.d(t,{s:function(){return r}});var l=n(97458),o=n(52983),a=n(86289),s=n(10836),c=n(91406),i=n(76682);const r=e=>{let{body:t,buttonTitle:n,cancelTitle:r="Cancel",closeCallback:d=(()=>null),confirmLoading:m=!1,isDestructive:u=!0,onConfirm:h,showModal:p,testId:x,title:g,zIndexClassName:k="z-50",version:v="v2"}=e;const w=(0,o.useCallback)((()=>{h()}),[h]),f=(0,o.useCallback)((e=>{d(e)}),[d]);return"v3"===v?(0,l.jsx)(i.H,{titleSeparator:!1,title:g,show:p,headerPadding:"pl-5 pr-4 pt-4 pb-0",titleCssClass:"text-lg font-bold text-primary",contentPadding:"p-5 pb-0",footerSeparator:!1,footer:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-x-2",children:[(0,l.jsx)(s.z,{onClick:()=>f(c.CloseSource.CANCEL_BUTTON),size:"sm",variant:"ghost",children:r}),(0,l.jsx)(s.z,{onClick:w,disabled:m,loading:m,size:"sm",variant:u?"danger":"primary",children:n})]}),children:(0,l.jsx)("p",{className:"text-sm text-primary",children:t})}):(0,l.jsx)(c.ModalV2,{show:p,title:g,paddingSize:"md",zIndexClassName:k,closeCallback:f,testId:x,children:(0,l.jsxs)("div",{className:"mt-6 space-y-10",children:[(0,l.jsx)("p",{className:"text-sm text-gray-900",children:t}),(0,l.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,l.jsx)(a.z,{variant:"ghost",onClick:()=>f(c.CloseSource.CANCEL_BUTTON),fluid:!0,children:r}),(0,l.jsx)(a.z,{disabled:m,showLoader:m,color:u?"red":"teal",onClick:w,fluid:!0,children:n})]})]})})};t.Z=r},9744:function(e,t,n){n.d(t,{a:function(){return u}});var l=n(97458),o=n(69826),a=n(76558),s=n(52983),c=n(80794),i=n(54805),r=n(79580),d=n(42740),m=n(57303);const u=e=>{let{close:t,collectionId:n,name:u,navigateToHomeAfterDelete:h=!0,show:p,workspaceId:x}=e;const g=(0,d.p)(),k=(0,a.useRouter)(),[,v]=(0,c.Db)(i.cq),w=(0,s.useCallback)((async()=>{try{(await v({id:n})).error||((0,o.Z9)(new o.rz({collectionId:n,collectionName:u,workspaceId:x})),null==g||g.pushSuccess("Collection deleted successfully"),h&&k.push("/"))}catch(e){throw e instanceof Error?new Error(e.message):new Error("Cannot delete collection, an unexpected error occurred")}}),[v,u,k,g,x,n,h]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(r.s,{title:(0,l.jsxs)("h3",{className:"text-lg leading-6 text-red-500 font-bold w-[90%]",children:['Delete "',u,'" collection ?']}),body:(0,m.B)("All of its content will be removed. You won't be able to undo this."),buttonTitle:"Delete",showModal:p,onConfirm:w,closeCallback:t,testId:"delete-workspace-collection-modal"})})}},57303:function(e,t,n){n.d(t,{B:function(){return l}});const l=function(e){return e}}}]);